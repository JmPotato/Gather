{% extends 'base.html' %}

{% block title %}{{ handler.settings['bbs_title'] }} > 设置{% end %}

{% block breadcrumb %}
<li><a href="/">{{ handler.settings['bbs_title'] }}</a> <span class="divider">/</span></li>
<li class="active">设置</li>
{% end %}

{% block body %}
<div class='span8'>
    <section class="box">
        <form class='form-horizontal'>
            {{ xsrf_form_html() }}
            <fieldset>
                <header>
                    <h3>设置</h3>
                </header>
                <div id="username-g" class="control-group">
                    <label class="control-label" for="email">用户名</label>
                    <div class="controls">
                        <input class="span5 disabled" id="username" type="text" value="{{ current_user['username'] }}" disabled>
                    </div>
                </div>
                <div id="email-g" class="control-group">
                    <label class="control-label" for="email">E-mail</label>
                    <div class="controls">
                        <input class="span5  type="email" id="email" value="{{ current_user['email'] }}" placeholder="请输入有效的邮箱地址" x-webkit-speech required>
                    </div>
                </div>
                <div id="website-g" class="control-group">
                    <label class="control-label" for="email">个人网址</label>
                    <div class="controls">
                        <input class="span5  type="url" id="website" x-webkit-speech value="{{ getvalue(current_user,'website') }}">
                    </div>
                </div>
                <div id="location-g" class="control-group">
                    <label class="control-label" for="email">所在地</label>
                    <div class="controls">
                        <input class="span5  type="text" id="location" x-webkit-speech value="{{ getvalue(current_user,'location') }}">
                    </div>
                </div>
                <div id="twitter-g" class="control-group">
                    <label class="control-label" for="email">Twitter用户名</label>
                    <div class="controls">
                        <input class="span5  type="text" id="twitter" x-webkit-speech value="{{ getvalue(current_user,'twitter') }}">
                    </div>
                </div>
                <div id="github-g" class="control-group">
                    <label class="control-label" for="email">Github用户名</label>
                    <div class="controls">
                        <input class="span5  type="text" id="github" x-webkit-speech value="{{ getvalue(current_user,'github') }}">
                    </div>
                </div>
                <div id="lovetag-g" class="control-group">
                    <label class="control-label" for="email">喜爱标签</label>
                    <div class="controls">
                        <input class="span5  type="text" id="lovetag" x-webkit-speech value="{{ ''.join(current_user['lovetag']) }}" placeholder="标签间使用空格 , 或 / 分割">
                        <p class="help-block">在您的<a href="/my">个人信息流</a>中，只会显示有您喜爱标签的帖子</p>
                    </div>
                </div>
                <div id="hatetag-g" class="control-group">
                    <label class="control-label" for="email">厌恶标签</label>
                    <div class="controls">
                        <input class="span5  type="text" id="hatetag" x-webkit-speech value="{{ ''.join(current_user['hatetag']) }}" placeholder="标签间使用空格 , 或 / 分割">
                        <p class="help-block">所有有您厌恶标签的帖子都不会显示在您的首页信息流上。</p>
                    </div>
                </div>
                <div id="css-g" class="control-group">
                    <label class="control-label" for="email">自定义CSS</label>
                    <div class="controls">
                        <textarea class="span5"  id="css">{{ current_user['css'] }}</textarea>
                        <p class="help-block">所有页面中都会加载你自定义的CSS</p>
                    </div>
                </div>
                <div id="twitter-bind-g" class="control-group">
                    <label class="control-label" for="twitterbind">Twitter绑定</label>
                    <div class="controls">
                    {% if current_user['twitter_bind'] %}
                        <a href="/twitter/unbind" class="btn btn-danger">解除Twitter绑定</a><br />
                    {% else %}
                        <a href="/twitter/oauth" class="btn btn-warning">绑定Twitter账号</a>
                    {% end %}
                    </div>
                </div>
                {% if current_user['twitter_bind'] %}
                <div id="twitter-sync-g" class="control-group">
                    <label class="control-label" for="twitter-sync">Twitter同步</label>
                    <div class="controls">
                        <label class="checkbox">
                            <input type="checkbox" id="twitter-sync" {% if current_user['twitter-sync'] %}checked {% end %}value="yes">
                        </label>
                    </div>
                </div>
                {% else %}
                <div class="hide">
                    <input type="checkbox" id="twitter-sync">
                </div>
                {% end %}
                <div class="form-actions">
                    <button id='submit' class='btn btn-primary'>提交</button>
                </div>
            </fieldset>
        </form>
    </section>
</div>
<div class='span4'>
    <section class='box'>
        <form>
            {{ xsrf_form_html() }}
            <fieldset>
                <header>
                    <h3>更改密码</h3>
                </header>
                <div id="old-g" class="control-group">
                    <label class="control-label" for="old">原密码：</label>
                    <div class="controls">
                        <input type="password" id="old" required style="width: 98%">
                        <span id="old-t" class="help-inline">请输入原密码</span>
                    </div>
                </div>
                <div id="new-g" class="control-group">
                    <label class="control-label" for="new" required>新密码：</label>
                    <div class="controls">
                        <input type="password" id="new" required style="width: 98%">
                        <span id="new-t" class="help-inline">请输入有效的新密码</span>
                    </div>
                </div>
                <button id='changepassword' class='btn btn-info'>提交</button>
            </fieldset>
        </form>
    </section>

    <section class="box">
        <header><h3>头像</h3></header>
        <p class="avatar"><img src="http://gravatar.com/avatar/{{ current_user['hashed_email'] }}?s=300" /></p>
        <a href="http://www.gravatar.com">去换头像</a>
    </section>
</div>
<script src='{{ static_url("js/authsetting.js") }}' type="text/javascript"></script>
{% end %}

